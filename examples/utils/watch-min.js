"use strict";var _createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Watch=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Page;return _classCallCheck(this,t),this.page=this.initPage(e),this.initWatch.bind(this)}return _createClass(t,[{key:"initPage",value:function(t){var n=this;Page=function(e){return e.$watch=n.initWatch.bind(n),t(e)}}},{key:"initWatch",value:function(e,t){var n=0<arguments.length&&void 0!==e?e:null,a=1<arguments.length&&void 0!==t?t:null,i=getCurrentPages();this.page=i[i.length-1],null===n&&(n=this.page.data),null===a&&(a=this.page.watch),null!==n&&null!==a&&this.setWatch(n,a)}},{key:"setWatch",value:function(i,r){var l=this;Object.keys(r).forEach(function(e){for(var t=e.split("."),n=i,a=0;a<t.length-1;a++)n=n[t[a]];l.observer(n,t[t.length-1],r[e])})}},{key:"observer",value:function(e,t,n){var a=e[t],i="";Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return a},set:function(e){i=a,a=e,n.call(this.page,e,i)}})}}]),t}();module.exports=Watch;